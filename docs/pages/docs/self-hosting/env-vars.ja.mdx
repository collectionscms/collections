---
title: '環境変数'
---

# 環境変数

環境変数は、Collections プロジェクト内のすべての設定に使用されます。

## 設定ファイル

Collections は、環境変数として `.env` ファイル設定を読み込みます。これは次のような構造になっています。

```js filename=".env"
AUTH_SECRET = '04a460c0bd9b99...';
DATABASE_URL = 'postgresql://...';
```

## 一般

| 変数名                  | 説明                      | 初期値                     |
| :---------------------- | :------------------------ | :------------------------- |
| PUBLIC_SERVER_ORIGIN    | Express サーバー オリジン | `http://app.test.com:4000` |
| PUBLIC_PORTAL_SUBDOMAIN | ポータルのサブドメイン    | `app`                      |
| SERVER_HOST             | Express サーバー ホスト   | `test.com`                 |
| SERVER_PORT             | App Server ポート         | `4000`                     |
| ADMIN_PORT              | App Admin ポート          | `4001`                     |
| NODE_ENV                | Node 実行環境             | `development`              |

## Storage

| 変数名             | 説明                                              | 初期値    |
| :----------------- | :------------------------------------------------ | :-------- |
| STORAGE_DRIVER     | 保存先ストレージのドライバ名（`local`, `aws-s3`） | `local`   |
| STORAGE_LOCAL_ROOT | ローカルストレージの保存先ディレクトリ            | `uploads` |
| STORAGE_KEY        | クラウドストレージのアクセスキー                  | --        |
| STORAGE_SECRET     | クラウドストレージのシークレット                  | --        |
| STORAGE_BUCKET     | クラウドストレージのバケット                      | --        |
| STORAGE_REGION     | クラウドストレージのリージョン                    | --        |

## Database

| 変数名       | 説明                                           | 初期値 |
| :----------- | :--------------------------------------------- | :----- |
| AUTH_SECRET  | 認証用のシークレット（メールプロバイダーのみ） | --     |
| DATABASE_URL | PostgreSQLへの接続URL                          | --     |

## Express

| 変数名    | 説明                         | 初期値 |
| :-------- | :--------------------------- | :----- |
| REQ_LIMIT | リクエストボディの最大サイズ | `4mb`  |

## 認証

| 変数名                | 説明                                                                   | 初期値                |
| :-------------------- | :--------------------------------------------------------------------- | :-------------------- |
| AUTH_GITHUB_ID        | GitHub OAuth 認証用の ID。GitHub Developer Portal から取得します。     | --                    |
| AUTH_GITHUB_SECRET    | GitHub OAuth 認証用の SECRET。GitHub Developer Portal から取得します。 | --                    |
| AUTH_GOOGLE_ID        | Google OAuth 認証用の ID。Google Cloud Platform から取得します。       | --                    |
| AUTH_GOOGLE_SECRET    | Google OAuth 認証用の SECRET。Google Cloud Platform から取得します。   | --                    |
| PUBLIC_AUTH_PROVIDERS | アプリケーションが提供するログイン方法                                 | `email,google,github` |

## CORS

| 変数名               | 説明                                                                                                                              | 初期値                       |
| :------------------- | :-------------------------------------------------------------------------------------------------------------------------------- | :--------------------------- |
| CORS_ENABLED         | CORS 設定全体を有効化するには `true` を設定します。                                                                               | `false`                      |
| CORS_ORIGIN          | Access-Control-Allow-Origin 文字列または正規表現で指定可能。`false` を指定して CORS を無効化できます。                            | `false`                      |
| CORS_METHODS         | Access-Control-Allow-Methods 許可するメソッドをカンマ区切りの文字列で渡します。                                                   | `GET,POST,PATCH,DELETE`      |
| CORS_ALLOWED_HEADERS | Access-Control-Allow-Headers 指定がない場合は、リクエストの Access-Control-Request-Headers ヘッダで指定されたヘッダを反映します。 | `Content-Type,Authorization` |
| CORS_EXPOSED_HEADERS | Access-Control-Expose-Headers 指定しない場合は、カスタムヘッダーは公開されません。                                                | `Content-Range`              |
| CORS_CREDENTIALS     | Access-Control-Allow-Credentials 有効化する場合は `true` を設定します。                                                           | `true`                       |
| CORS_MAX_AGE         | Access-Control-Max-Age ヘッダを渡す場合は整数値を指定します。                                                                     | `1800`                       |

## ログ

| 変数名                 | 説明                                                                             | 初期値 |
| :--------------------- | :------------------------------------------------------------------------------- | :----- |
| PUBLIC_LOG_LEVEL       | ログの出力レベル（`fatal`, `error`, `warn`, `info`, `debug`, `trace`, `silent`） | `info` |
| PUBLIC_LOG_HIDE_OBJECT | pino が出力するリクエスト/レスポンスの詳細情報を表示しない                       | `true` |

## Email

| 変数名                 | 説明                         | 初期値     |
| :--------------------- | :--------------------------- | :--------- |
| EMAIL_TRANSPORT        | email の送信プロバイダ       | `sendgrid` |
| EMAIL_FROM             | email の送信元メールアドレス | --         |
| EMAIL_SENDGRID_API_KEY | sendgrid の API キー         | --         |

## エディター

| 変数名           | 説明                                | 初期値 |
| :--------------- | :---------------------------------- | :----- |
| TIPTAP_PRO_TOKEN | TipTap 拡張機能を使うためのトークン | --     |

## システム

| 変数名              | 説明                                             | 初期値 |
| :------------------ | :----------------------------------------------- | :----- |
| RESERVED_SUBDOMAINS | プロジェクトに割当できない予約済みのサブドメイン | `app`  |
